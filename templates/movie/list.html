{% extends "movie/mode.html" %}
{% block css %}
    <link rel="stylesheet" href="/static/css/index.css">
{% endblock %}



{% block content %}
    <div>
        <div class="row11">
            <div class="row" style="min-width: 1000px;margin: 2%">
                <div id="mm" class="#" style="display:inline-block;margin:0 30px;width:72%;min-width: 72%;float: left">

                </div>
                <div class="right_c"
                     style="display:inline-block;min-width: 20%;width: 20%;float: right;margin:0 auto;color: #5e5e5e">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title">热门</h3>
                        </div>
                        <div class="panel-body">
                            <div class="media">
                                <a href="/">我不是药神</a>
                            </div>
                            <div class="media">
                                <a href="/">我不是药神</a>

                            </div>
                            <div class="media">
                                <a href="/">我不是药神</a>

                            </div>
                            <div class="media">
                                <a href="/">我不是药神</a>

                            </div>
                        </div>
                    </div>
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title">随机</h3>
                        </div>
                        <div class="panel-body">
                            <div class="media">
                                <a href="/">我不是药神</a>

                            </div>
                            <div class="media">
                                <a href="/">我不是药神</a>

                            </div>
                            <div class="media">
                                <a href="/">我不是药神</a>

                            </div>
                            <div class="media">
                                <a href="/">我不是药神</a>

                            </div>
                        </div>
                    </div>

                </div>
            </div>
            <nav id="page_list" aria-label="Page navigation" style="margin-right:150px;text-align: center">
{#                <ul  class="pagination">#}
{#                    #}
{#                </ul>#}
            </nav>
        </div>
    </div>
{% endblock %}

{% block js %}
    {#<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.js" type="text/javascript"></script>#}

    <script type="text/javascript">
        console.log(1);
        $.getJSON(
            "http://192.168.1.170:8888/api/video/",
            function (data) {
                console.log(data.data.results);
                data = data.data.results;
                for (var i = 0; i < data.length; i++) {
                    console.log(data[i]);
                    var tag = $('<div class="media"></div>');
                    tag.append('<div class="media-left media-middle"><a href="/video_detail/'+data[i].id+'"><img src="#cover" width="280px" height="360px"></a></div>'.replace('#cover', data[i].cover));
                    tag.append('<div class="media-body"><a href="/video_detail/'+data[i].id+'" style="font-size: 25px">'+data[i].name+'</a>' +
                        '<div class="media-heading">简介 : '+data[i].summarize+'</div></div>' );
                    $("#mm").append(tag);
                }
                var all_page = Math.ceil(data.length /10);
                var page_tag = $('<ul class="pagination"><ul>');
                page_tag.append('<li>\n<a href="#" aria-label="Previous">\n<span aria-hidden="true">&laquo;</span>\n</a>\n</li>'.replace('#',data.previous));
                for (var page = 0; page < all_page; page++) {
                    page_tag.append('<li><a href="#url">#</a></li>'.replace('#url','http://192.168.1.170:8888/api/video/?page='+page).replace('#',page))

                }
                page_tag.append('<li>\n<a href="#" aria-label="Next">\n<span aria-hidden="true">&raquo;</span>\n</a>\n</li>'.replace('#',data.next));
                $("#page_list").append(page_tag);
            }
        )
    </script>
{% endblock %}